# Configuración final optimizada para Oracle Autonomous Database
spring.application.name=FileService

# === DATABASE CONFIGURATION ===
spring.datasource.url=jdbc:oracle:thin:@TelegramBotDatabase_medium?TNS_ADMIN=/wallet
spring.datasource.username=ADMIN
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=oracle.jdbc.OracleDriver

# === JPA/HIBERNATE CONFIGURATION ===
spring.jpa.database-platform=org.hibernate.dialect.OracleDialect
spring.jpa.hibernate.ddl-auto=none
spring.jpa.open-in-view=false
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true

# Configuración adicional para compatibilidad Oracle
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.OracleDialect
spring.jpa.properties.hibernate.connection.provider_class=org.hibernate.hikari.internal.HikariCPConnectionProvider

# === CONNECTION POOL OPTIMIZADO ===
spring.datasource.hikari.maximum-pool-size=3
spring.datasource.hikari.minimum-idle=1
spring.datasource.hikari.idle-timeout=30000
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.max-lifetime=600000
spring.datasource.hikari.leak-detection-threshold=60000

# === ORACLE SPECIFIC PROPERTIES ===
# Desactivar características problemáticas
spring.datasource.hikari.data-source-properties.oracle.jdbc.fanEnabled=false
spring.datasource.hikari.data-source-properties.oracle.net.disableOob=true

# === SECURITY ===
jwt.secret.oracle=${JWT_SECRET_ORACLE}

# === SERVER CONFIGURATION ===
server.port=8082
spring.jackson.time-zone=America/Mexico_City

# === SWAGGER/OpenAPI ===
springdoc.api-docs.enabled=true
springdoc.swagger-ui.enabled=true
springdoc.api-docs.path=/v3/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.configUrl=/swagger-files/v3/api-docs/swagger-config
springdoc.swagger-ui.url=/swagger-files/v3/api-docs
springdoc.swagger-ui.oauth2RedirectUrl=/swagger-files/swagger-ui/oauth2-redirect.html
springdoc.swagger-ui.disable-swagger-default-url=true

# === OCI OBJECT STORAGE ===
oci.user-id=ocid1.user.oc1..aaaaaaaabmc3iadp6igkvatvthtrqwfsafn6qohkcswftigkhfjvhjb6ed4q
oci.tenancy-id=ocid1.tenancy.oc1..aaaaaaaaph452cb4estjh7xjcfa3v3v73tp7vmkuet4egqzm44mely6no5cq
oci.compartment-id=ocid1.tenancy.oc1..aaaaaaaaph452cb4estjh7xjcfa3v3v73tp7vmkuet4egqzm44mely6no5cq
oci.fingerprint=2e:27:8f:62:d9:7a:68:d0:15:5c:5c:1e:e1:32:42:ac
oci.region=mx-queretaro-1
oci.private-key-path=/oci-keys/oci-private-key.pem
oci.bucket-name=task-attachments
oci.namespace=axfvmmw9g9lu
oci.preauthenticated-request-name=https://objectstorage.mx-queretaro-1.oraclecloud.com/p/SUoQrKjqJatc9g4VJlmuz-d7bNbQy9PLiScRDV-4pi4tkThB-kWq5JehWY0Qm-tj/n/axfvmmw9g9lu/b/task-attachments/o/

# === MULTIPART FILE UPLOAD ===
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=50MB
spring.servlet.multipart.file-size-threshold=2KB

# === TOMCAT SETTINGS ===
server.tomcat.max-swallow-size=50MB
server.tomcat.max-http-post-size=50MB
server.tomcat.connection-timeout=20000
spring.mvc.async.request-timeout=300000

# === ORACLE WALLET CONFIGURATION ===
oracle.net.tns_admin=/wallet
oracle.net.wallet_location=/wallet

# === LOGGING ===
logging.level.com.Oracle.FileService=INFO
logging.level.oracle.jdbc=WARN
logging.level.com.zaxxer.hikari=WARN